## User Flow (MVP)

이 문서는 `docs/ia.md`의 5탭 IA를 기준으로, 각 탭을 **"최소 사용 가능(MVP)"** 상태로 만들기 위한 사용자 플로우를 정의합니다.

- 목표: 사용자가 **오늘 기록을 남기고(식단/운동/지표)** → **요약과 변화를 확인**할 수 있어야 합니다.
- 범위: 서버 동기화/외부 음식 DB/고급 분석은 제외하고, 우선 **로컬 저장 기반**으로도 성립하는 흐름을 우선 정의합니다.

---

## 공통 규칙(모든 탭)

- **기준 날짜**: 기본은 “오늘”, 상단에서 날짜를 바꿀 수 있음(최소는 오늘만 가능해도 됨).
- **저장 단위**: 모든 기록은 "작성 즉시 저장"(자동 저장) 또는 "저장" 버튼 1회.
- **피드백**:
  - 성공: 리스트/요약 수치가 즉시 갱신
  - 실패: 오류 메시지 + 재시도(선택)
- **빈 상태(Empty state)**: 기록이 없을 때 “추가하기” CTA를 노출

---

## 1) Dashboard (`/app/dashboard`) — "오늘 허브"

### 1-1. (핵심) 오늘 요약 확인

- **진입**: 앱 진입 후 기본 탭
- **행동**:
  - 오늘 총 섭취 kcal / 매크로 요약 확인
  - 오늘 운동 요약(세트/볼륨/운동 여부) 확인
  - 주요 지표(체중 등) 확인
- **완료 조건(AC)**:
  - 오늘 식단/운동/지표 데이터가 있으면 대시보드 카드가 합계/최근값을 표시
  - 데이터가 없으면 각 카드에 “추가하기” CTA가 보임

### 1-2. (핵심) 빠른 기록 진입

- **행동**:
  - "음식 추가" → Meals로 이동
  - "운동 기록" → Workouts로 이동
  - "체중 입력" → Progress로 이동
- **완료 조건(AC)**:
  - CTA 클릭 시 해당 탭으로 이동하고, 해당 탭의 추가 UI가 즉시 사용 가능

---

## 2) Meals (`/app/meals`) — "음식 기록"

### 2-1. (MVP) 수동 음식 추가 → 일일 요약 갱신

- **진입**: Meals 탭
- **전제 데이터(최소)**:
  - FoodEntry: `date`, `mealType`, `name`, `calories`, `protein?`, `carbs?`, `fat?`, `quantity?`
- **행동(플로우)**:
  - (A) "추가" 버튼 탭
  - (B) 음식명 입력
  - (C) kcal 입력
  - (D) (선택) 매크로 입력(탄/단/지)
  - (E) 식사 타입 선택(아침/점심/저녁/간식)
  - (F) 저장
- **결과**:
  - 해당 식사 섹션 리스트에 항목 추가
  - 상단 일일 합계(kcal/매크로)가 즉시 갱신
- **완료 조건(AC)**:
  - 음식 1개를 추가하면 리스트에서 즉시 확인 가능
  - 상단 합계가 추가한 값만큼 증가
  - 삭제(선택): 항목 삭제 시 합계가 감소

### 2-2. (MVP) 음식 기록 편집/삭제

- **행동**:
  - 리스트 항목 탭 → 편집(수치 수정) 또는 삭제
- **완료 조건(AC)**:
  - 수정/삭제 후 리스트와 합계가 즉시 일관되게 갱신

> 검색/영양 DB 연동은 MVP 2단계로 미룸(추가 플로우로 확장 가능).

---

## 3) Workouts (`/app/workouts`) — "운동(세트) 기록"

### 3-1. (MVP) 운동 종목 추가 → 세트 입력 → 저장

- **진입**: Workouts 탭
- **전제 데이터(최소)**:
  - WorkoutSession: `date`
  - Exercise: `name`
  - SetEntry: `exerciseId`, `setIndex`, `weight`, `reps`
- **행동(플로우)**:
  - (A) "운동 추가" 탭
  - (B) 종목명 입력(예: Bench Press)
  - (C) "세트 추가" 탭
  - (D) kg, reps 입력
  - (E) (선택) 세트 추가 반복
  - (F) 저장(또는 자동 저장)
- **결과**:
  - 오늘 운동 리스트에 종목이 보임
  - 종목 아래에 세트 목록이 보임
  - 상단 요약(총 세트/총 볼륨 등)이 갱신
- **완료 조건(AC)**:
  - 종목 1개 + 세트 1개를 생성/표시할 수 있음
  - 세트를 수정/삭제할 수 있음
  - 요약 지표(최소 1개: 총 세트 또는 총 볼륨)가 데이터와 일치

### 3-2. (MVP) 히스토리(날짜별) 조회

- **행동**:
  - 날짜를 바꾸거나(또는 목록에서) 과거 세션을 조회
- **완료 조건(AC)**:
  - 날짜별로 저장된 운동 세션이 있으면 로드되어 표시
  - 없으면 빈 상태 + "운동 추가" CTA

---

## 4) Progress (`/app/progress`) — "지표 기록 + 그래프"

### 4-1. (MVP) 체중 기록 → 라인 차트 반영

- **진입**: Progress 탭
- **전제 데이터(최소)**:
  - MetricEntry: `date`, `type`(weight/bodyFat/etc), `value`, `unit`
- **행동(플로우)**:
  - (A) 지표 선택(기본=체중)
  - (B) 값 입력(예: 72.4)
  - (C) 저장
- **결과**:
  - 기록 리스트에 추가
  - 차트 데이터가 갱신
- **완료 조건(AC)**:
  - 체중을 2개 이상 기록하면 선형 그래프로 변화가 보임
  - 동일 날짜 중복 처리 정책이 일관됨(예: "덮어쓰기" 또는 "하루 다중 기록 허용" 중 하나)

### 4-2. (MVP) 기간/지표 전환

- **행동**:
  - 기간(1W/1M/3M/ALL) 선택
  - 지표(type) 변경
- **완료 조건(AC)**:
  - 선택에 따라 차트/리스트가 필터링되어 표시

---

## 5) Settings (`/app/settings/*`) — "계정 + 목표/환경"

### 5-1. (MVP) 계정/프로필 관리(Clerk)

- **진입**: Settings 탭
- **행동**:
  - Clerk 프로필 화면에서 기본 계정 정보 변경
- **완료 조건(AC)**:
  - 현재처럼 `UserProfile`이 정상 표시되고 동작

### 5-2. (MVP) 목표 설정(앱 고유 설정)

- **전제 데이터(최소)**:
  - Goals: `dailyCalories?`, `macroTargets?`, `weightGoal?`, `workoutGoal?`
- **행동(플로우)**:
  - (A) 목표 섹션 진입
  - (B) 목표 입력(최소: 일일 칼로리)
  - (C) 저장
- **결과**:
  - Dashboard/Meals에서 “목표 대비” UI가 계산 가능해짐
- **완료 조건(AC)**:
  - 목표를 저장하면 Dashboard/Meals 요약 카드에서 목표 대비 값이 계산됨(예: 잔여 kcal)

---

## MVP 완료의 정의(Definition of Done)

- 사용자가
  - 오늘 음식 1개를 기록하고,
  - 오늘 운동 1종목(세트 1개 이상)을 기록하고,
  - 체중 2개 이상을 기록한 뒤,
  - Dashboard에서 요약/진행을 확인할 수 있다.
